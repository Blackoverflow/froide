{% extends 'publicbody/base.html' %}

{% load i18n %}
{% load markup %}

{% block app_body %}
<h2>{{ object.name }}</h2>

<div class="row mt-4">
  <div class="col-md-3">
    <dl class="my-0">
      {% if object.created %}
        <dt>{% blocktrans %}Came into effect on{% endblocktrans %}:</dt>
        <dd>{{ object.created|date:"DATE_FORMAT" }}</dd>
      {% endif %}
      {% if object.updated %}
        <dt>{% blocktrans %}Last update on{% endblocktrans %}:</dt>
        <dd>{{ object.updated|date:"DATE_FORMAT" }}</dd>
      {% endif %}
      {% if not legal_text %}
        <dt>{% blocktrans with name=object.name %}Official law text{% endblocktrans %}</dt>
        <dd>
          <a href="{{ object.url }}" target="_blank" rel="noopener">
            {{ object.name }}
          </a>
        </dd>
      {% endif %}
      {% if object.mediator %}
        <dt>{% blocktrans %}Mediating authority{% endblocktrans %}:</dt>
        <dd><a href="{{ object.mediator.get_absolute_url }}">{{ object.mediator.name }}</a></dd>
      {% endif %}  
    </dl>
  </div>

  <div class="col-md-9">
    {% if legal_text %}
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active" href="#legaltext" data-toggle="tab">Gesetzestext</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#description" data-toggle="tab">{% trans "Description" %}</a>
      </li>
    </ul>
    {% endif %}

    <div class="tab-content mt-3">
      {% if legal_text %}
      <div class="tab-pane active" id="legaltext">
        <div class="alert alert-info">
          {% blocktrans %}
            This is a copy of the law, for which we can't guarantee correctness.
          {% endblocktrans %}
          <a href="{{ object.url }}" target="_blank" rel="noopener">
            {% blocktrans with name=object.name %}Official law text of {{ name }}{% endblocktrans %}
          </a>
        </div>

        {{ legal_text|safe }}
      </div>
      {% endif %}
      <div class="tab-pane fade {% if not known_legal_text %}active{% endif %}" id="description">
        {{ object.long_description|markdown }}
      </div>
    </div>
  </div>
</div>
{% endblock %}
